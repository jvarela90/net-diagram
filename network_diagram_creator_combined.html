<!DOCTYPE html>

<html lang="es">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Professional Network Diagram Creator - Technical Edition</title>
<style>
        :root {
            --primary: #1a1a2e;
            --secondary: #16213e;
            --accent: #0f3460;
            --highlight: #e94560;
            --success: #00d4aa;
            --warning: #ff6b35;
            --info: #4a90e2;
            --danger: #e74c3c;
            --light: #f8f9fa;
            --dark: #212529;
            --border: #e1e5e9;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'JetBrains Mono', 'Consolas', 'Monaco', monospace;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            height: 100vh;
            overflow: hidden;
            color: var(--light);
        }

        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            background: var(--light);
            margin: 8px;
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        /* Enhanced Header */
        .app-header {
            background: var(--primary);
            color: var(--light);
            padding: 15px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px var(--shadow);
        }

        .app-title {
            font-size: 1.4em;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .version-badge {
            background: var(--highlight);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7em;
            font-weight: 600;
        }

        .header-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .header-btn {
            background: var(--accent);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s ease;
        }

        .header-btn:hover {
            background: var(--highlight);
            transform: translateY(-1px);
        }

        /* Main Layout */
        .main-layout {
            display: flex;
            flex: 1;
            background: #f5f7fa;
            color: var(--dark);
        }

        /* Advanced Sidebar */
        .sidebar {
            width: 360px;
            background: white;
            border-right: 3px solid var(--accent);
            display: flex;
            flex-direction: column;
            box-shadow: 2px 0 10px var(--shadow);
        }

        .sidebar-header {
            background: var(--accent);
            color: white;
            padding: 15px;
            font-weight: 600;
        }

        .sidebar-tabs {
            display: flex;
            background: var(--secondary);
        }

        .sidebar-tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            border: none;
            background: transparent;
            color: var(--light);
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            font-size: 12px;
        }

        .sidebar-tab.active {
            background: white;
            color: var(--dark);
            border-bottom-color: var(--highlight);
        }

        .sidebar-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .search-filter {
            margin-bottom: 20px;
        }

        .search-input {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .device-category {
            margin-bottom: 25px;
        }

        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: var(--accent);
            color: white;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 10px;
            font-weight: 600;
            font-size: 13px;
        }

        .category-toggle {
            transition: transform 0.3s ease;
        }

        .category-header.collapsed .category-toggle {
            transform: rotate(-90deg);
        }

        .category-devices {
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .category-header.collapsed + .category-devices {
            max-height: 0 !important;
        }

        .device-item {
            display: flex;
            align-items: center;
            padding: 12px;
            margin: 6px 0;
            background: white;
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: grab;
            transition: all 0.3s ease;
            position: relative;
        }

        .device-item:hover {
            border-color: var(--accent);
            transform: translateX(4px);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .device-item:active {
            cursor: grabbing;
        }

        .device-icon {
            width: 40px;
            height: 40px;
            margin-right: 12px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 11px;
            color: white;
            position: relative;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .device-details {
            flex: 1;
        }

        .device-name {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 2px;
        }

        .device-specs {
            font-size: 11px;
            color: #666;
            margin-bottom: 2px;
        }

        .device-interfaces {
            font-size: 10px;
            color: var(--accent);
            font-weight: 500;
        }

        /* Workspace */
        .workspace-container {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .toolbar {
            background: white;
            padding: 15px 20px;
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
            border-bottom: 2px solid var(--border);
            box-shadow: 0 2px 5px var(--shadow);
        }

        .toolbar-group {
            display: flex;
            gap: 8px;
            align-items: center;
            padding-right: 20px;
            border-right: 1px solid var(--border);
        }

        .toolbar-group:last-child {
            border-right: none;
        }

        .toolbar-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .toolbar-btn:hover {
            background: var(--highlight);
            transform: translateY(-1px);
        }

        .toolbar-btn.active {
            background: var(--highlight);
            box-shadow: 0 0 0 2px rgba(233, 69, 96, 0.3);
        }

        .toolbar-select {
            padding: 8px 12px;
            border: 2px solid var(--border);
            border-radius: 6px;
            font-size: 12px;
            background: white;
        }

        .toolbar-select:focus {
            outline: none;
            border-color: var(--accent);
        }

        /* Canvas */
        .canvas-area {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: #fafbfc;
        }

        .canvas-viewport {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
        }

        .canvas-container {
            position: relative;
            width: 4000px;
            height: 3000px;
            background: 
                linear-gradient(90deg, rgba(26, 26, 46, 0.03) 1px, transparent 1px),
                linear-gradient(180deg, rgba(26, 26, 46, 0.03) 1px, transparent 1px);
            background-size: 30px 30px;
            transform-origin: 0 0;
        }

        /* Enhanced Device Rendering */
        .device-on-canvas {
            position: absolute;
            background: white;
            border: 3px solid var(--accent);
            border-radius: 12px;
            padding: 15px;
            cursor: move;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            min-width: 140px;
            min-height: 120px;
            transition: all 0.3s ease;
            user-select: none;
            font-size: 11px;
        }

        .device-on-canvas:hover {
            border-color: var(--highlight);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.25);
            transform: translateY(-2px);
        }

        .device-on-canvas.selected {
            border-color: var(--highlight);
            box-shadow: 0 0 0 3px rgba(233, 69, 96, 0.3);
        }

        .device-header {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border);
        }

        .device-canvas-icon {
            width: 32px;
            height: 32px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 10px;
            color: white;
            margin-right: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .device-title {
            flex: 1;
        }

        .device-name-canvas {
            font-weight: 700;
            font-size: 12px;
            color: var(--dark);
        }

        .device-type-canvas {
            font-size: 9px;
            color: #666;
            text-transform: uppercase;
        }

        .device-status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-left: 8px;
        }

        .status-up { background: var(--success); animation: pulse 2s infinite; }
        .status-down { background: var(--danger); }
        .status-warning { background: var(--warning); animation: pulse 2s infinite; }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .device-info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4px;
            margin-bottom: 8px;
            font-size: 9px;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 2px 4px;
            background: #f8f9fa;
            border-radius: 3px;
        }

        .info-label {
            color: #666;
            font-weight: 600;
        }

        .info-value {
            color: var(--dark);
            font-weight: 500;
        }

        .device-interfaces-list {
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid var(--border);
        }

        .interface-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2px 0;
            font-size: 8px;
        }

        .interface-name {
            font-weight: 600;
            color: var(--accent);
        }

        .interface-status {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            margin-left: 4px;
        }

        .interface-up { background: var(--success); }
        .interface-down { background: var(--danger); }

        /* Enhanced Connections */
        .connection-line {
            pointer-events: none;
            z-index: 10;
        }

        .connection-label {
            position: absolute;
            background: rgba(255, 255, 255, 0.95);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 9px;
            font-weight: 600;
            color: var(--dark);
            border: 1px solid var(--border);
            pointer-events: none;
            z-index: 15;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* Technical Modals */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
        }

        .modal-content {
            background: white;
            margin: 2% auto;
            border-radius: 12px;
            width: 95%;
            max-width: 1200px;
            max-height: 90vh;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .modal-header {
            background: var(--primary);
            color: white;
            padding: 20px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 700;
        }

        .modal-close {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
            transition: background 0.3s ease;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .modal-body {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        .modal-sidebar {
            width: 200px;
            background: #f8f9fa;
            border-right: 1px solid var(--border);
            padding: 0;
        }

        .modal-tab {
            display: block;
            width: 100%;
            padding: 15px 20px;
            border: none;
            background: none;
            text-align: left;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            color: #666;
            border-bottom: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .modal-tab:hover {
            background: #e9ecef;
        }

        .modal-tab.active {
            background: var(--accent);
            color: white;
        }

        .modal-content-area {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .form-section {
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--accent);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: var(--dark);
            font-size: 13px;
        }

        .form-input {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid var(--border);
            border-radius: 6px;
            font-size: 13px;
            transition: border-color 0.3s ease;
            font-family: inherit;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .form-textarea {
            min-height: 80px;
            resize: vertical;
        }

        .interface-config {
            background: #f8f9fa;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
        }

        .interface-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .interface-name-input {
            font-weight: 600;
            background: white;
        }

        .interface-remove {
            background: var(--danger);
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .add-interface-btn {
            background: var(--success);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            margin-top: 10px;
        }

        .config-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            font-size: 12px;
        }

        .config-table th,
        .config-table td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .config-table th {
            background: var(--accent);
            color: white;
            font-weight: 600;
        }

        .config-table tr:hover {
            background: #f8f9fa;
        }

        /* Status Bar */
        .status-bar {
            background: var(--primary);
            color: white;
            padding: 12px 25px;
            display: grid;
            grid-template-columns: 1fr auto auto auto auto;
            gap: 25px;
            align-items: center;
            font-size: 12px;
            font-weight: 500;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success);
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 15px 20px;
            z-index: 3000;
            max-width: 400px;
            transform: translateX(450px);
            transition: transform 0.4s ease;
            border-left: 4px solid var(--info);
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success { border-left-color: var(--success); }
        .notification.warning { border-left-color: var(--warning); }
        .notification.error { border-left-color: var(--danger); }

        /* Device Type Colors */
        .router-icon { background: linear-gradient(135deg, #e74c3c, #c0392b); }
        .core-router-icon { background: linear-gradient(135deg, #8e44ad, #732d91); }
        .edge-router-icon { background: linear-gradient(135deg, #e67e22, #d35400); }
        .switch-icon { background: linear-gradient(135deg, #27ae60, #229954); }
        .l3-switch-icon { background: linear-gradient(135deg, #2ecc71, #27ae60); }
        .managed-switch-icon { background: linear-gradient(135deg, #16a085, #138d75); }
        .firewall-icon { background: linear-gradient(135deg, #e74c3c, #cb4335); }
        .utm-icon { background: linear-gradient(135deg, #ad1457, #880e4f); }
        .ips-icon { background: linear-gradient(135deg, #d32f2f, #b71c1c); }
        .waf-icon { background: linear-gradient(135deg, #7b1fa2, #4a148c); }
        .loadbalancer-icon { background: linear-gradient(135deg, #1976d2, #0d47a1); }
        .modem-icon { background: linear-gradient(135deg, #ff9800, #f57c00); }
        .ont-icon { background: linear-gradient(135deg, #ff5722, #d84315); }
        .ap-icon { background: linear-gradient(135deg, #4caf50, #388e3c); }
        .controller-icon { background: linear-gradient(135deg, #009688, #00695c); }
        .server-icon { background: linear-gradient(135deg, #607d8b, #455a64); }
        .web-server-icon { background: linear-gradient(135deg, #4caf50, #388e3c); }
        .db-server-icon { background: linear-gradient(135deg, #9c27b0, #7b1fa2); }
        .dns-server-icon { background: linear-gradient(135deg, #3f51b5, #303f9f); }
        .mail-server-icon { background: linear-gradient(135deg, #2196f3, #1976d2); }
        .dhcp-server-icon { background: linear-gradient(135deg, #795548, #5d4037); }
        .pc-icon { background: linear-gradient(135deg, #78909c, #546e7a); }
        .laptop-icon { background: linear-gradient(135deg, #8d6e63, #6d4c41); }
        .mobile-icon { background: linear-gradient(135deg, #ffc107, #ff8f00); }
        .printer-icon { background: linear-gradient(135deg, #424242, #212121); }
        .scanner-icon { background: linear-gradient(135deg, #37474f, #263238); }
        .ip-phone-icon { background: linear-gradient(135deg, #00796b, #004d40); }
        .camera-icon { background: linear-gradient(135deg, #5d4037, #3e2723); }
        .nvr-icon { background: linear-gradient(135deg, #455a64, #263238); }
        .ups-icon { background: linear-gradient(135deg, #6a1b9a, #4a148c); }
        .pdu-icon { background: linear-gradient(135deg, #bf360c, #8d1e04); }
        .nas-icon { background: linear-gradient(135deg, #f57c00, #e65100); }
        .san-icon { background: linear-gradient(135deg, #5d4037, #3e2723); }

        /* Connection Styles */
        .ethernet-line { stroke: #27ae60; stroke-width: 4; }
        .fiber-line { stroke: #f39c12; stroke-width: 4; }
        .serial-line { stroke: #9b59b6; stroke-width: 3; }
        .coaxial-line { stroke: #34495e; stroke-width: 4; }
        .wireless-line { stroke: #3498db; stroke-width: 3; stroke-dasharray: 8,4; }
        .console-line { stroke: #e74c3c; stroke-width: 2; stroke-dasharray: 4,2; }

        /* Responsive */
        @media (max-width: 1400px) {
            .sidebar { width: 320px; }
            .form-grid { grid-template-columns: 1fr; }
        }

        @media (max-width: 1024px) {
            .sidebar { width: 280px; }
            .toolbar { flex-direction: column; }
            .toolbar-group { border-right: none; border-bottom: 1px solid var(--border); }
        }
    

/* --- Additional Styles from v3 --- */

        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --bg-light: #ecf0f1;
            --bg-dark: #34495e;
            --text-light: #ffffff;
            --text-dark: #2c3e50;
            --border-radius: 8px;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            overflow: hidden;
        }

        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            background: rgba(255, 255, 255, 0.95);
            margin: 8px;
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        /* Header */
        .app-header {
            background: var(--primary-color);
            color: var(--text-light);
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 12px 12px 0 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .app-title {
            font-size: 1.5em;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .theme-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .theme-toggle {
            background: var(--secondary-color);
            border: none;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: var(--transition);
        }

        .theme-toggle:hover {
            background: #2980b9;
        }

        /* Main Layout */
        .main-layout {
            display: flex;
            flex: 1;
            background: var(--bg-light);
        }

        /* Advanced Sidebar */
        .sidebar {
            width: 320px;
            background: var(--primary-color);
            color: var(--text-light);
            display: flex;
            flex-direction: column;
            border-right: 3px solid var(--secondary-color);
        }

        .sidebar-tabs {
            display: flex;
            background: var(--bg-dark);
        }

        .sidebar-tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            border: none;
            background: transparent;
            color: var(--text-light);
            transition: var(--transition);
            border-bottom: 3px solid transparent;
        }

        .sidebar-tab.active {
            background: var(--primary-color);
            border-bottom-color: var(--secondary-color);
        }

        .sidebar-tab:hover {
            background: var(--primary-color);
        }

        .sidebar-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .search-box {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            font-size: 14px;
        }

        .device-category {
            margin-bottom: 25px;
        }

        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: var(--bg-dark);
            border-radius: var(--border-radius);
            margin-bottom: 10px;
            cursor: pointer;
        }

        .category-header h3 {
            font-size: 0.9em;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .category-toggle {
            font-size: 12px;
            transform: rotate(0deg);
            transition: var(--transition);
        }

        .category-header.collapsed .category-toggle {
            transform: rotate(-90deg);
        }

        .category-devices {
            max-height: 300px;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .category-header.collapsed + .category-devices {
            max-height: 0;
        }

        .device-item {
            display: flex;
            align-items: center;
            padding: 12px;
            margin: 6px 0;
            background: var(--bg-dark);
            border-radius: var(--border-radius);
            cursor: grab;
            transition: var(--transition);
            border: 2px solid transparent;
            position: relative;
        }

        .device-item:hover {
            background: var(--secondary-color);
            transform: translateX(5px);
            border-color: #2980b9;
        }

        .device-item:active {
            cursor: grabbing;
        }

        .device-icon {
            width: 32px;
            height: 32px;
            margin-right: 12px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 11px;
            color: white;
            position: relative;
        }

        .device-info {
            flex: 1;
        }

        .device-name {
            font-weight: bold;
            font-size: 14px;
        }

        .device-description {
            font-size: 11px;
            opacity: 0.8;
            margin-top: 2px;
        }

        /* Workspace */
        .workspace-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--bg-light);
        }

        .advanced-toolbar {
            background: var(--bg-dark);
            color: var(--text-light);
            padding: 15px;
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
            border-bottom: 3px solid var(--secondary-color);
        }

        .toolbar-group {
            display: flex;
            gap: 8px;
            align-items: center;
            padding: 0 15px;
            border-right: 1px solid #555;
        }

        .toolbar-group:last-child {
            border-right: none;
        }

        .toolbar-btn {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 13px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .toolbar-btn:hover {
            background: #2980b9;
            transform: translateY(-1px);
        }

        .toolbar-btn:active {
            transform: translateY(0);
        }

        .toolbar-btn.active {
            background: var(--accent-color);
        }

        .toolbar-select {
            padding: 8px;
            border-radius: var(--border-radius);
            border: none;
            background: var(--primary-color);
            color: white;
            font-size: 13px;
        }

        .zoom-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-left: auto;
        }

        .zoom-level {
            font-size: 14px;
            min-width: 50px;
            text-align: center;
        }

        /* Canvas Area */
        .canvas-area {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: white;
        }

        .canvas-viewport {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
        }

        .canvas-container {
            position: relative;
            width: 3000px;
            height: 2000px;
            background: 
                radial-gradient(circle, #bdc3c7 1px, transparent 1px);
            background-size: 25px 25px;
            transform-origin: 0 0;
            transition: transform 0.2s ease;
        }

        /* Layer System */
        .layer-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: var(--border-radius);
            font-size: 12px;
            z-index: 100;
        }

        .layer-controls {
            position: absolute;
            top: 60px;
            right: 10px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: var(--border-radius);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            padding: 15px;
            min-width: 200px;
            z-index: 100;
        }

        .layer-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            margin: 4px 0;
            border-radius: 4px;
            cursor: pointer;
            transition: var(--transition);
        }

        .layer-item:hover {
            background: var(--bg-light);
        }

        .layer-item.active {
            background: var(--secondary-color);
            color: white;
        }

        /* Advanced Device Styling */
        .device-on-canvas {
            position: absolute;
            background: white;
            border: 3px solid var(--secondary-color);
            border-radius: var(--border-radius);
            padding: 12px;
            cursor: move;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
            min-width: 100px;
            text-align: center;
            font-size: 12px;
            transition: var(--transition);
            user-select: none;
        }

        .device-on-canvas:hover {
            border-color: #2980b9;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.25);
            transform: translateY(-2px);
        }

        .device-on-canvas.selected {
            border-color: var(--accent-color);
            box-shadow: 0 0 20px rgba(231, 76, 60, 0.4);
        }

        .device-on-canvas.status-down {
            border-color: var(--accent-color);
            opacity: 0.7;
        }

        .device-on-canvas.status-warning {
            border-color: var(--warning-color);
        }

        .device-on-canvas.status-up {
            border-color: var(--success-color);
        }

        .device-header {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 8px;
        }

        .device-status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-left: 8px;
            animation: pulse 2s infinite;
        }

        .status-up { background: var(--success-color); }
        .status-down { background: var(--accent-color); }
        .status-warning { background: var(--warning-color); }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .device-label {
            font-weight: bold;
            margin-bottom: 6px;
            color: var(--text-dark);
            font-size: 13px;
        }

        .device-details {
            font-size: 10px;
            color: #666;
            line-height: 1.3;
        }

        .device-metrics {
            margin-top: 6px;
            padding: 4px;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 4px;
            font-size: 9px;
        }

        /* Enhanced Connections */
        .connection-line {
            position: absolute;
            pointer-events: none;
            z-index: 10;
        }

        .connection-label {
            position: absolute;
            background: rgba(255, 255, 255, 0.9);
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 10px;
            pointer-events: none;
            z-index: 15;
        }

        /* Enhanced Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(3px);
        }

        .modal-content {
            background-color: white;
            margin: 3% auto;
            padding: 0;
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            max-height: 85vh;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .modal-header {
            background: var(--primary-color);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-body {
            padding: 20px;
            overflow-y: auto;
            flex: 1;
        }

        .modal-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--bg-light);
        }

        .modal-tab {
            padding: 12px 20px;
            border: none;
            background: transparent;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: var(--transition);
        }

        .modal-tab.active {
            border-bottom-color: var(--secondary-color);
            color: var(--secondary-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid var(--bg-light);
            border-radius: var(--border-radius);
            font-size: 14px;
            transition: var(--transition);
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--secondary-color);
        }

        /* Enhanced Status Bar */
        .status-bar {
            background: var(--primary-color);
            color: var(--text-light);
            padding: 12px 20px;
            display: grid;
            grid-template-columns: 1fr auto auto auto;
            gap: 20px;
            align-items: center;
            font-size: 13px;
            border-radius: 0 0 12px 12px;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success-color);
        }

        /* Monitoring Dashboard */
        .monitoring-panel {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: var(--border-radius);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            padding: 15px;
            min-width: 300px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 150;
        }

        .monitoring-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--bg-light);
        }

        .metric-item {
            display: flex;
            justify-content: space-between;
            padding: 8px;
            margin: 4px 0;
            background: var(--bg-light);
            border-radius: 4px;
        }

        .metric-value {
            font-weight: bold;
        }

        .metric-good { color: var(--success-color); }
        .metric-warning { color: var(--warning-color); }
        .metric-critical { color: var(--accent-color); }

        /* Templates Panel */
        .templates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .template-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .template-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-color: var(--secondary-color);
        }

        .template-title {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 10px;
            color: var(--text-dark);
        }

        .template-description {
            color: #666;
            font-size: 14px;
            line-height: 1.4;
            margin-bottom: 15px;
        }

        .template-devices {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .template-device {
            background: var(--bg-light);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            color: var(--text-dark);
        }

        /* Utilities */
        .hidden { display: none !important; }
        .fade-in { animation: fadeIn 0.3s ease; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .sidebar { width: 280px; }
            .form-grid { grid-template-columns: 1fr; }
        }

        @media (max-width: 768px) {
            .sidebar { width: 240px; }
            .advanced-toolbar { flex-direction: column; align-items: stretch; }
            .toolbar-group { border-right: none; border-bottom: 1px solid #555; padding: 10px 0; }
        }

        /* Device Type Specific Colors */
        .router-icon { background: linear-gradient(135deg, #e74c3c, #c0392b); }
        .core-router-icon { background: linear-gradient(135deg, #8e44ad, #732d91); }
        .edge-router-icon { background: linear-gradient(135deg, #e67e22, #d35400); }
        .switch-icon { background: linear-gradient(135deg, #27ae60, #229954); }
        .l3-switch-icon { background: linear-gradient(135deg, #2ecc71, #27ae60); }
        .hub-icon { background: linear-gradient(135deg, #3498db, #2980b9); }
        .firewall-icon { background: linear-gradient(135deg, #e74c3c, #cb4335); }
        .ips-icon { background: linear-gradient(135deg, #ad1457, #880e4f); }
        .waf-icon { background: linear-gradient(135deg, #d32f2f, #b71c1c); }
        .loadbalancer-icon { background: linear-gradient(135deg, #7b1fa2, #4a148c); }
        .vpn-icon { background: linear-gradient(135deg, #1976d2, #0d47a1); }
        .modem-icon { background: linear-gradient(135deg, #ff9800, #f57c00); }
        .ap-icon { background: linear-gradient(135deg, #4caf50, #388e3c); }
        .controller-icon { background: linear-gradient(135deg, #009688, #00695c); }
        .pc-icon { background: linear-gradient(135deg, #607d8b, #455a64); }
        .notebook-icon { background: linear-gradient(135deg, #795548, #5d4037); }
        .server-icon { background: linear-gradient(135deg, #ff5722, #d84315); }
        .dns-server-icon { background: linear-gradient(135deg, #3f51b5, #303f9f); }
        .web-server-icon { background: linear-gradient(135deg, #4caf50, #388e3c); }
        .db-server-icon { background: linear-gradient(135deg, #9c27b0, #7b1fa2); }
        .mail-server-icon { background: linear-gradient(135deg, #2196f3, #1976d2); }
        .printer-icon { background: linear-gradient(135deg, #424242, #212121); }
        .nas-icon { background: linear-gradient(135deg, #ff9800, #ef6c00); }
        .san-icon { background: linear-gradient(135deg, #795548, #5d4037); }
        .iot-device-icon { background: linear-gradient(135deg, #00bcd4, #0097a7); }
        .sensor-icon { background: linear-gradient(135deg, #4caf50, #2e7d32); }
        .camera-icon { background: linear-gradient(135deg, #9e9e9e, #616161); }
        .phone-icon { background: linear-gradient(135deg, #607d8b, #37474f); }

        /* Layer specific backgrounds */
        .layer-isp { background-color: rgba(142, 68, 173, 0.1); }
        .layer-wan { background-color: rgba(231, 76, 60, 0.1); }
        .layer-core { background-color: rgba(52, 152, 219, 0.1); }
        .layer-distribution { background-color: rgba(46, 204, 113, 0.1); }
        .layer-access { background-color: rgba(243, 156, 18, 0.1); }
        .layer-dmz { background-color: rgba(230, 126, 34, 0.1); }
        .layer-user { background-color: rgba(155, 89, 182, 0.1); }
        .layer-iot { background-color: rgba(26, 188, 156, 0.1); }

        /* Mini Map */
        .minimap {
            position: absolute;
            bottom: 20px;
            right: 20px;
            width: 200px;
            height: 150px;
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid var(--secondary-color);
            border-radius: var(--border-radius);
            overflow: hidden;
            z-index: 100;
        }

        .minimap-viewport {
            position: absolute;
            border: 2px solid var(--accent-color);
            background: rgba(231, 76, 60, 0.2);
            cursor: move;
        }

        /* Notification System */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            padding: 15px 20px;
            z-index: 3000;
            min-width: 300px;
            transform: translateX(350px);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success { border-left: 4px solid var(--success-color); }
        .notification.warning { border-left: 4px solid var(--warning-color); }
        .notification.error { border-left: 4px solid var(--accent-color); }
        .notification.info { border-left: 4px solid var(--secondary-color); }
    </style>
</head>
<body>
<div class="app-container">
<!-- Header -->
<div class="app-header">
<div class="app-title">
<span>🔧</span>
<span>Professional Network Diagram Creator</span>
<div class="version-badge">Technical v3.0</div>
</div>
<div class="header-controls">
<button class="header-btn" onclick="toggleTechnicalMode()">⚙️ Modo Técnico</button>
<button class="header-btn" onclick="validateNetwork()">✅ Validar Red</button>
<button class="header-btn" onclick="generateConfig()">📋 Config</button>
<button class="header-btn" onclick="showHelp()">❓ Ayuda</button>
</div>
</div>
<!-- Main Layout -->
<div class="main-layout">
<!-- Enhanced Sidebar -->
<div class="sidebar">
<div class="sidebar-header">
                    🌐 Equipos de Red Profesionales
                </div>
<div class="sidebar-tabs">
<button class="sidebar-tab active" onclick="switchSidebarTab('devices')">Dispositivos</button>
<button class="sidebar-tab" onclick="switchSidebarTab('templates')">Plantillas</button>
<button class="sidebar-tab" onclick="switchSidebarTab('config')">Config</button>
</div>
<div class="sidebar-content">
<!-- Devices Tab -->
<div class="tab-content active" id="devices-tab">
<div class="search-filter">
<input class="search-input" onkeyup="filterDevices(this.value)" placeholder="🔍 Buscar dispositivos..." type="text"/>
</div>
<!-- Routers & Layer 3 -->
<div class="device-category">
<div class="category-header" onclick="toggleCategory(this)">
<span>🔀 ROUTERS &amp; CAPA 3</span>
<span class="category-toggle">▼</span>
</div>
<div class="category-devices" style="max-height: 400px;">
<div class="device-item" data-device-type="core-router" draggable="true">
<div class="device-icon core-router-icon">CR</div>
<div class="device-details">
<div class="device-name">Core Router</div>
<div class="device-specs">BGP, OSPF, MPLS</div>
<div class="device-interfaces">10GE × 48, 100GE × 4</div>
</div>
</div>
<div class="device-item" data-device-type="edge-router" draggable="true">
<div class="device-icon edge-router-icon">ER</div>
<div class="device-details">
<div class="device-name">Edge Router</div>
<div class="device-specs">BGP, NAT, Firewall</div>
<div class="device-interfaces">GE × 8, Serial × 4</div>
</div>
</div>
<div class="device-item" data-device-type="router" draggable="true">
<div class="device-icon router-icon">R</div>
<div class="device-details">
<div class="device-name">Router</div>
<div class="device-specs">RIP, OSPF, Static</div>
<div class="device-interfaces">FE × 4, Serial × 2</div>
</div>
</div>
<div class="device-item" data-device-type="l3-switch" draggable="true">
<div class="device-icon l3-switch-icon">L3</div>
<div class="device-details">
<div class="device-name">L3 Switch</div>
<div class="device-specs">VLAN, STP, OSPF</div>
<div class="device-interfaces">GE × 24, SFP+ × 4</div>
</div>
</div>
</div>
</div>
<!-- Switches & Layer 2 -->
<div class="device-category">
<div class="category-header" onclick="toggleCategory(this)">
<span>🔄 SWITCHES &amp; CAPA 2</span>
<span class="category-toggle">▼</span>
</div>
<div class="category-devices" style="max-height: 400px;">
<div class="device-item" data-device-type="managed-switch" draggable="true">
<div class="device-icon managed-switch-icon">MS</div>
<div class="device-details">
<div class="device-name">Managed Switch</div>
<div class="device-specs">VLAN, QoS, SNMP</div>
<div class="device-interfaces">GE × 48, SFP × 4</div>
</div>
</div>
<div class="device-item" data-device-type="switch" draggable="true">
<div class="device-icon switch-icon">SW</div>
<div class="device-details">
<div class="device-name">Unmanaged Switch</div>
<div class="device-specs">Plug &amp; Play</div>
<div class="device-interfaces">FE × 24</div>
</div>
</div>
</div>
</div>
<!-- Security Appliances -->
<div class="device-category">
<div class="category-header" onclick="toggleCategory(this)">
<span>🛡️ SEGURIDAD</span>
<span class="category-toggle">▼</span>
</div>
<div class="category-devices" style="max-height: 400px;">
<div class="device-item" data-device-type="firewall" draggable="true">
<div class="device-icon firewall-icon">FW</div>
<div class="device-details">
<div class="device-name">Firewall</div>
<div class="device-specs">Stateful, NAT, VPN</div>
<div class="device-interfaces">GE × 8, DMZ × 2</div>
</div>
</div>
<div class="device-item" data-device-type="utm" draggable="true">
<div class="device-icon utm-icon">UTM</div>
<div class="device-details">
<div class="device-name">UTM</div>
<div class="device-specs">FW, IPS, AV, Web Filter</div>
<div class="device-interfaces">GE × 6, WiFi</div>
</div>
</div>
<div class="device-item" data-device-type="ips" draggable="true">
<div class="device-icon ips-icon">IPS</div>
<div class="device-details">
<div class="device-name">IPS/IDS</div>
<div class="device-specs">DPI, Threat Detection</div>
<div class="device-interfaces">Monitor × 4</div>
</div>
</div>
<div class="device-item" data-device-type="waf" draggable="true">
<div class="device-icon waf-icon">WAF</div>
<div class="device-details">
<div class="device-name">Web App Firewall</div>
<div class="device-specs">HTTP/HTTPS, SSL Offload</div>
<div class="device-interfaces">GE × 4</div>
</div>
</div>
</div>
</div>
<!-- WAN & Access -->
<div class="device-category">
<div class="category-header" onclick="toggleCategory(this)">
<span>🌐 WAN &amp; ACCESO</span>
<span class="category-toggle">▼</span>
</div>
<div class="category-devices" style="max-height: 400px;">
<div class="device-item" data-device-type="modem" draggable="true">
<div class="device-icon modem-icon">MDM</div>
<div class="device-details">
<div class="device-name">Cable Modem</div>
<div class="device-specs">DOCSIS 3.1, NAT</div>
<div class="device-interfaces">Coax, GE × 4, USB</div>
</div>
</div>
<div class="device-item" data-device-type="ont" draggable="true">
<div class="device-icon ont-icon">ONT</div>
<div class="device-details">
<div class="device-name">ONT Fiber</div>
<div class="device-specs">GPON, NAT, VoIP</div>
<div class="device-interfaces">Fiber, GE × 4, Tel × 2</div>
</div>
</div>
<div class="device-item" data-device-type="ap" draggable="true">
<div class="device-icon ap-icon">AP</div>
<div class="device-details">
<div class="device-name">Access Point</div>
<div class="device-specs">WiFi 6, MU-MIMO</div>
<div class="device-interfaces">PoE, 2.4/5GHz</div>
</div>
</div>
<div class="device-item" data-device-type="controller" draggable="true">
<div class="device-icon controller-icon">WLC</div>
<div class="device-details">
<div class="device-name">WiFi Controller</div>
<div class="device-specs">CAPWAP, Roaming</div>
<div class="device-interfaces">GE × 4, Console</div>
</div>
</div>
</div>
</div>
<!-- Servers -->
<div class="device-category">
<div class="category-header" onclick="toggleCategory(this)">
<span>🖥️ SERVIDORES</span>
<span class="category-toggle">▼</span>
</div>
<div class="category-devices" style="max-height: 400px;">
<div class="device-item" data-device-type="web-server" draggable="true">
<div class="device-icon web-server-icon">WEB</div>
<div class="device-details">
<div class="device-name">Web Server</div>
<div class="device-specs">Apache, Nginx, IIS</div>
<div class="device-interfaces">GE × 2, iLO</div>
</div>
</div>
<div class="device-item" data-device-type="db-server" draggable="true">
<div class="device-icon db-server-icon">DB</div>
<div class="device-details">
<div class="device-name">Database Server</div>
<div class="device-specs">MySQL, PostgreSQL, SQL</div>
<div class="device-interfaces">10GE × 2, iDRAC</div>
</div>
</div>
<div class="device-item" data-device-type="dns-server" draggable="true">
<div class="device-icon dns-server-icon">DNS</div>
<div class="device-details">
<div class="device-name">DNS Server</div>
<div class="device-specs">BIND, Authoritative</div>
<div class="device-interfaces">GE × 2</div>
</div>
</div>
<div class="device-item" data-device-type="dhcp-server" draggable="true">
<div class="device-icon dhcp-server-icon">DHCP</div>
<div class="device-details">
<div class="device-name">DHCP Server</div>
<div class="device-specs">ISC DHCP, Reservations</div>
<div class="device-interfaces">GE × 1</div>
</div>
</div>
<div class="device-item" data-device-type="mail-server" draggable="true">
<div class="device-icon mail-server-icon">MAIL</div>
<div class="device-details">
<div class="device-name">Mail Server</div>
<div class="device-specs">Exchange, Postfix</div>
<div class="device-interfaces">GE × 2, RAID</div>
</div>
</div>
</div>
</div>
<!-- End Devices -->
<div class="device-category">
<div class="category-header" onclick="toggleCategory(this)">
<span>💻 DISPOSITIVOS FINALES</span>
<span class="category-toggle">▼</span>
</div>
<div class="category-devices" style="max-height: 400px;">
<div class="device-item" data-device-type="pc" draggable="true">
<div class="device-icon pc-icon">PC</div>
<div class="device-details">
<div class="device-name">Desktop PC</div>
<div class="device-specs">Windows, DHCP Client</div>
<div class="device-interfaces">GE × 1, WiFi</div>
</div>
</div>
<div class="device-item" data-device-type="laptop" draggable="true">
<div class="device-icon laptop-icon">LAP</div>
<div class="device-details">
<div class="device-name">Laptop</div>
<div class="device-specs">Mobile, WiFi Primary</div>
<div class="device-interfaces">GE × 1, WiFi 6</div>
</div>
</div>
<div class="device-item" data-device-type="mobile" draggable="true">
<div class="device-icon mobile-icon">MOB</div>
<div class="device-details">
<div class="device-name">Mobile Device</div>
<div class="device-specs">iOS, Android</div>
<div class="device-interfaces">WiFi, Cellular</div>
</div>
</div>
<div class="device-item" data-device-type="printer" draggable="true">
<div class="device-icon printer-icon">PRT</div>
<div class="device-details">
<div class="device-name">Network Printer</div>
<div class="device-specs">IPP, SNMP</div>
<div class="device-interfaces">GE × 1, WiFi</div>
</div>
</div>
<div class="device-item" data-device-type="ip-phone" draggable="true">
<div class="device-icon ip-phone-icon">IP</div>
<div class="device-details">
<div class="device-name">IP Phone</div>
<div class="device-specs">SIP, PoE</div>
<div class="device-interfaces">PoE, PC Port</div>
</div>
</div>
</div>
</div>
<!-- Infrastructure -->
<div class="device-category">
<div class="category-header" onclick="toggleCategory(this)">
<span>🏗️ INFRAESTRUCTURA</span>
<span class="category-toggle">▼</span>
</div>
<div class="category-devices" style="max-height: 400px;">
<div class="device-item" data-device-type="loadbalancer" draggable="true">
<div class="device-icon loadbalancer-icon">LB</div>
<div class="device-details">
<div class="device-name">Load Balancer</div>
<div class="device-specs">F5, HAProxy, Round Robin</div>
<div class="device-interfaces">10GE × 4</div>
</div>
</div>
<div class="device-item" data-device-type="nas" draggable="true">
<div class="device-icon nas-icon">NAS</div>
<div class="device-details">
<div class="device-name">NAS</div>
<div class="device-specs">RAID, NFS, SMB</div>
<div class="device-interfaces">10GE × 2, iSCSI</div>
</div>
</div>
<div class="device-item" data-device-type="ups" draggable="true">
<div class="device-icon ups-icon">UPS</div>
<div class="device-details">
<div class="device-name">UPS</div>
<div class="device-specs">Battery Backup, SNMP</div>
<div class="device-interfaces">Serial, Network</div>
</div>
</div>
</div>
</div>
</div>
<!-- Templates Tab -->
<div class="tab-content" id="templates-tab">
<h3 style="margin-bottom: 20px;">🏗️ Plantillas Técnicas</h3>
<!-- Template content will go here -->
</div>
<!-- Config Tab -->
<div class="tab-content" id="config-tab">
<h3 style="margin-bottom: 20px;">⚙️ Configuración</h3>
<!-- Config content will go here -->
</div>
</div>
</div>
<!-- Workspace -->
<div class="workspace-container">
<!-- Toolbar -->
<div class="toolbar">
<div class="toolbar-group">
<button class="toolbar-btn" onclick="newDiagram()">📄 Nuevo</button>
<button class="toolbar-btn" onclick="saveDiagram()">💾 Guardar</button>
<button class="toolbar-btn" onclick="document.getElementById('file-input').click()">📁 Cargar</button>
</div>
<div class="toolbar-group">
<button class="toolbar-btn" id="connect-btn" onclick="toggleConnectionMode()">🔗 Conectar</button>
<select class="toolbar-select" id="connection-type">
<option value="ethernet">Ethernet (Cat6)</option>
<option value="fiber">Fibra Óptica (SM/MM)</option>
<option value="serial">Serial (RS232/RS485)</option>
<option value="coaxial">Coaxial (RG6/RG59)</option>
<option value="wireless">Inalámbrico (802.11)</option>
<option value="console">Console (RJ45/USB)</option>
</select>
</div>
<div class="toolbar-group">
<button class="toolbar-btn" onclick="autoArrange()">🎯 Auto-organizar</button>
<button class="toolbar-btn" onclick="validateTopology()">✅ Validar</button>
<button class="toolbar-btn" onclick="generateConfig()">📋 Config CLI</button>
</div>
<div class="toolbar-group">
<button class="toolbar-btn" onclick="exportDiagram()">📸 Exportar</button>
<button class="toolbar-btn" onclick="clearDiagram()">🗑️ Limpiar</button>
</div>
<div style="margin-left: auto;">
<button class="toolbar-btn" onclick="zoomOut()">🔍-</button>
<span id="zoom-level" style="margin: 0 10px; font-weight: 600;">100%</span>
<button class="toolbar-btn" onclick="zoomIn()">🔍+</button>
</div>
</div>
<!-- Canvas -->
<div class="canvas-area">
<div class="canvas-viewport" id="canvas-viewport">
<div class="canvas-container" id="canvas-container">
<svg id="connection-svg" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;">
</svg>
</div>
</div>
</div>
</div>
</div>
<!-- Status Bar -->
<div class="status-bar">
<div class="status-item">
<div class="status-indicator"></div>
<span id="status-text">Sistema listo - Red profesional</span>
</div>
<div class="status-item">
<span>Dispositivos: <strong id="device-count">0</strong></span>
</div>
<div class="status-item">
<span>Conexiones: <strong id="connection-count">0</strong></span>
</div>
<div class="status-item">
<span>Subredes: <strong id="subnet-count">0</strong></span>
</div>
<div class="status-item">
<span>Zoom: <strong id="zoom-display">100%</strong></span>
</div>
</div>
</div>
<!-- Technical Properties Modal -->
<div class="modal" id="properties-modal">
<div class="modal-content">
<div class="modal-header">
<h3 class="modal-title" id="modal-title">Configuración Técnica del Dispositivo</h3>
<button class="modal-close" onclick="closePropertiesModal()">×</button>
</div>
<div class="modal-body">
<div class="modal-sidebar">
<button class="modal-tab active" onclick="switchModalTab('general')">📋 General</button>
<button class="modal-tab" onclick="switchModalTab('interfaces')">🔌 Interfaces</button>
<button class="modal-tab" onclick="switchModalTab('routing')">🔀 Enrutamiento</button>
<button class="modal-tab" onclick="switchModalTab('services')">⚙️ Servicios</button>
<button class="modal-tab" onclick="switchModalTab('security')">🛡️ Seguridad</button>
<button class="modal-tab" onclick="switchModalTab('monitoring')">📊 Monitoreo</button>
</div>
<div class="modal-content-area">
<form id="properties-form">
<!-- General Tab -->
<div class="tab-content active" id="general-tab">
<div class="form-section">
<h3 class="section-title">Información General</h3>
<div class="form-grid">
<div class="form-group">
<label class="form-label">Hostname:</label>
<input class="form-input" id="device-hostname" required="" type="text"/>
</div>
<div class="form-group">
<label class="form-label">Tipo de Dispositivo:</label>
<input class="form-input" id="device-type-display" readonly="" type="text"/>
</div>
<div class="form-group">
<label class="form-label">Modelo:</label>
<input class="form-input" id="device-model" type="text"/>
</div>
<div class="form-group">
<label class="form-label">Fabricante:</label>
<input class="form-input" id="device-vendor" type="text"/>
</div>
<div class="form-group">
<label class="form-label">Número de Serie:</label>
<input class="form-input" id="device-serial" type="text"/>
</div>
<div class="form-group">
<label class="form-label">Versión de Software:</label>
<input class="form-input" id="device-software" type="text"/>
</div>
</div>
</div>
<div class="form-section">
<h3 class="section-title">Ubicación y Rack</h3>
<div class="form-grid">
<div class="form-group">
<label class="form-label">Ubicación:</label>
<input class="form-input" id="device-location" type="text"/>
</div>
<div class="form-group">
<label class="form-label">Rack/Gabinete:</label>
<input class="form-input" id="device-rack" type="text"/>
</div>
<div class="form-group">
<label class="form-label">Unidad de Rack (U):</label>
<input class="form-input" id="device-rack-unit" max="42" min="1" type="number"/>
</div>
<div class="form-group">
<label class="form-label">Asset Tag:</label>
<input class="form-input" id="device-asset-tag" type="text"/>
</div>
</div>
</div>
</div>
<!-- Interfaces Tab -->
<div class="tab-content" id="interfaces-tab">
<div class="form-section">
<h3 class="section-title">Configuración de Interfaces</h3>
<div id="interfaces-container">
<!-- Interfaces will be dynamically populated -->
</div>
<button class="add-interface-btn" onclick="addInterface()" type="button">+ Agregar Interfaz</button>
</div>
</div>
<!-- Routing Tab -->
<div class="tab-content" id="routing-tab">
<div class="form-section">
<h3 class="section-title">Configuración de Enrutamiento</h3>
<div class="form-grid">
<div class="form-group">
<label class="form-label">Protocolo de Enrutamiento:</label>
<select class="form-input" id="routing-protocol">
<option value="">Sin enrutamiento dinámico</option>
<option value="rip">RIP v2</option>
<option value="ospf">OSPF</option>
<option value="eigrp">EIGRP</option>
<option value="bgp">BGP</option>
<option value="static">Solo rutas estáticas</option>
</select>
</div>
<div class="form-group">
<label class="form-label">Router ID:</label>
<input class="form-input" id="router-id" placeholder="1.1.1.1" type="text"/>
</div>
<div class="form-group">
<label class="form-label">ASN (BGP):</label>
<input class="form-input" id="bgp-asn" max="65535" min="1" type="number"/>
</div>
</div>
<h4 style="margin: 20px 0 10px 0;">Rutas Estáticas</h4>
<table class="config-table">
<thead>
<tr>
<th>Red Destino</th>
<th>Máscara</th>
<th>Next Hop</th>
<th>Métrica</th>
<th>Acción</th>
</tr>
</thead>
<tbody id="static-routes-table">
<!-- Static routes will be added here -->
</tbody>
</table>
<button class="add-interface-btn" onclick="addStaticRoute()" type="button">+ Agregar Ruta</button>
</div>
</div>
<!-- Services Tab -->
<div class="tab-content" id="services-tab">
<div class="form-section">
<h3 class="section-title">Servicios de Red</h3>
<div class="service-config" id="service-dhcp">
<h4>Servidor DHCP</h4>
<div class="form-grid">
<div class="form-group">
<label class="form-label">
<input id="dhcp-enabled" type="checkbox"/> Habilitar DHCP
                                            </label>
</div>
<div class="form-group">
<label class="form-label">Pool de IPs:</label>
<input class="form-input" id="dhcp-pool" placeholder="192.168.1.100-192.168.1.200" type="text"/>
</div>
<div class="form-group">
<label class="form-label">Máscara de Subred:</label>
<input class="form-input" id="dhcp-netmask" type="text" value="255.255.255.0"/>
</div>
<div class="form-group">
<label class="form-label">Gateway:</label>
<input class="form-input" id="dhcp-gateway" type="text"/>
</div>
<div class="form-group">
<label class="form-label">DNS Primario:</label>
<input class="form-input" id="dhcp-dns1" type="text" value="8.8.8.8"/>
</div>
<div class="form-group">
<label class="form-label">DNS Secundario:</label>
<input class="form-input" id="dhcp-dns2" type="text" value="8.8.4.4"/>
</div>
</div>
</div>
<div class="service-config" id="service-nat">
<h4>NAT (Network Address Translation)</h4>
<div class="form-grid">
<div class="form-group">
<label class="form-label">
<input id="nat-enabled" type="checkbox"/> Habilitar NAT
                                            </label>
</div>
<div class="form-group">
<label class="form-label">Interfaz WAN:</label>
<select class="form-input" id="nat-wan-interface">
<option value="">Seleccionar interfaz</option>
</select>
</div>
<div class="form-group">
<label class="form-label">Interfaz LAN:</label>
<select class="form-input" id="nat-lan-interface">
<option value="">Seleccionar interfaz</option>
</select>
</div>
</div>
</div>
</div>
</div>
<!-- Security Tab -->
<div class="tab-content" id="security-tab">
<div class="form-section">
<h3 class="section-title">Configuración de Seguridad</h3>
<div class="form-grid">
<div class="form-group">
<label class="form-label">Método de Autenticación:</label>
<select class="form-input" id="auth-method">
<option value="local">Local</option>
<option value="radius">RADIUS</option>
<option value="tacacs">TACACS+</option>
<option value="ldap">LDAP</option>
</select>
</div>
<div class="form-group">
<label class="form-label">Usuario Admin:</label>
<input class="form-input" id="admin-username" type="text"/>
</div>
<div class="form-group">
<label class="form-label">SNMP Community:</label>
<input class="form-input" id="snmp-community" type="text" value="public"/>
</div>
<div class="form-group">
<label class="form-label">SSH Versión:</label>
<select class="form-input" id="ssh-version">
<option value="2">SSH v2</option>
<option value="1">SSH v1</option>
</select>
</div>
</div>
</div>
</div>
<!-- Monitoring Tab -->
<div class="tab-content" id="monitoring-tab">
<div class="form-section">
<h3 class="section-title">Estado y Monitoreo</h3>
<div class="form-grid">
<div class="form-group">
<label class="form-label">Estado Operacional:</label>
<select class="form-input" id="device-status">
<option value="up">🟢 Operacional</option>
<option value="down">🔴 Fuera de Servicio</option>
<option value="warning">🟡 Con Advertencias</option>
<option value="maintenance">🔵 En Mantenimiento</option>
</select>
</div>
<div class="form-group">
<label class="form-label">CPU (%):</label>
<input class="form-input" id="device-cpu" max="100" min="0" type="number"/>
</div>
<div class="form-group">
<label class="form-label">Memoria (%):</label>
<input class="form-input" id="device-memory" max="100" min="0" type="number"/>
</div>
<div class="form-group">
<label class="form-label">Temperatura (°C):</label>
<input class="form-input" id="device-temperature" max="100" min="0" type="number"/>
</div>
<div class="form-group">
<label class="form-label">Uptime:</label>
<input class="form-input" id="device-uptime" readonly="" type="text"/>
</div>
<div class="form-group">
<label class="form-label">Última Actualización:</label>
<input class="form-input" id="last-update" type="datetime-local"/>
</div>
</div>
<h4 style="margin: 20px 0 10px 0;">Alertas Activas</h4>
<textarea class="form-input form-textarea" id="device-alerts" placeholder="Alertas y logs del sistema..." readonly=""></textarea>
</div>
</div>
<div style="padding: 20px; border-top: 1px solid var(--border); display: flex; gap: 10px; justify-content: flex-end;">
<button class="toolbar-btn" onclick="deleteSelectedDevice()" style="background: var(--danger);" type="button">🗑️ Eliminar</button>
<button class="toolbar-btn" onclick="closePropertiesModal()" style="background: #6c757d;" type="button">Cancelar</button>
<button class="toolbar-btn" type="submit">💾 Guardar Configuración</button>
</div>
</form>
</div>
</div>
</div>
</div>
<!-- Hidden file input -->
<input accept=".json" id="file-input" onchange="loadDiagram(event)" style="display: none;" type="file"/>
<!-- Notification -->
<div class="notification" id="notification"></div>
<script></script></body></html>