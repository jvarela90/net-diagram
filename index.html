<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Network Diagram Creator Pro</title>
    
    <!-- CSS Principal -->
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/components.css">
    <link rel="stylesheet" href="assets/css/themes.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
    
    <!-- Font Awesome para iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="main-header">
        <div class="logo">
            <i class="fas fa-network-wired"></i>
            <span>Network Diagram Creator Pro</span>
        </div>
        <div class="header-actions">
            <button id="newDiagram" class="btn btn-primary">
                <i class="fas fa-file"></i> Nuevo
            </button>
            <button id="saveDiagram" class="btn btn-secondary">
                <i class="fas fa-save"></i> Guardar
            </button>
            <button id="loadDiagram" class="btn btn-secondary">
                <i class="fas fa-folder-open"></i> Cargar
            </button>
            <button id="exportDiagram" class="btn btn-secondary">
                <i class="fas fa-download"></i> Exportar
            </button>
        </div>
    </header>

    <!-- Contenedor Principal -->
    <div class="app-container">
        <!-- Sidebar Izquierdo -->
        <aside class="sidebar sidebar-left" id="devicePanel">
            <h3>Dispositivos</h3>
            <div class="device-categories">
                <!-- Las categor√≠as se cargar√°n din√°micamente -->
            </div>
        </aside>

        <!-- √Årea de Trabajo -->
        <main class="workspace">
            <!-- Toolbar -->
            <div class="toolbar" id="toolbar">
                <div class="tool-group">
                    <button class="tool-btn active" data-tool="select" title="Seleccionar">
                        <i class="fas fa-mouse-pointer"></i>
                    </button>
                    <button class="tool-btn" data-tool="connect" title="Conectar">
                        <i class="fas fa-plug"></i>
                    </button>
                    <button class="tool-btn" data-tool="delete" title="Eliminar">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
                <div class="tool-group">
                    <button class="tool-btn" id="zoomIn" title="Acercar">
                        <i class="fas fa-search-plus"></i>
                    </button>
                    <button class="tool-btn" id="zoomOut" title="Alejar">
                        <i class="fas fa-search-minus"></i>
                    </button>
                    <button class="tool-btn" id="zoomReset" title="Restablecer Zoom">
                        <i class="fas fa-compress"></i>
                    </button>
                </div>
                <div class="tool-group">
                    <button class="tool-btn" id="toggleGrid" title="Mostrar/Ocultar Grilla">
                        <i class="fas fa-border-all"></i>
                    </button>
                    <button class="tool-btn" id="toggleLabels" title="Mostrar/Ocultar Etiquetas">
                        <i class="fas fa-tag"></i>
                    </button>
                </div>
            </div>

            <!-- Canvas -->
            <div class="canvas-container" id="canvasContainer">
                <canvas id="networkCanvas"></canvas>
                <div id="selectionBox" class="selection-box"></div>
            </div>

            <!-- Panel de Capas -->
            <div class="layers-panel" id="layersPanel">
                <h4>Capas</h4>
                <div class="layers-list" id="layersList">
                    <!-- Las capas se cargar√°n din√°micamente -->
                </div>
            </div>
        </main>

        <!-- Sidebar Derecho -->
        <aside class="sidebar sidebar-right" id="propertiesPanel">
            <h3>Propiedades</h3>
            <div class="properties-content" id="propertiesContent">
                <p class="no-selection">Selecciona un dispositivo para ver sus propiedades</p>
            </div>
        </aside>
    </div>

    <!-- Modal para Di√°logos -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <!-- Notificaciones -->
    <div class="notifications" id="notifications"></div>

    <!-- Scripts - Orden correcto de carga -->
    <!-- Core primero -->
    <script src="assets/js/state-manager.js"></script>
    <script src="assets/js/utils/error-handler.js"></script>

    <!-- Managers principales -->
    <script src="assets/js/core/layer-manager.js"></script>
    <script src="assets/js/core/device-manager.js"></script>
    <script src="assets/js/core/connection-manager.js"></script>
    <script src="assets/js/core/canvas-manager.js"></script>

    <!-- UI -->
    <script src="assets/js/ui/notifications.js"></script>
    <script src="assets/js/ui/modal.js"></script>
    <script src="assets/js/ui/toolbar.js"></script>
    <script src="assets/js/ui/sidebar.js"></script>

    <!-- Utilidades -->
    <script src="assets/js/utils/helpers.js"></script>
    <script src="assets/js/utils/validators.js"></script>
    <script src="assets/js/utils/file-manager.js"></script>
    <script src="assets/js/utils/cable-label-generator.js"></script>

    <!-- Inicializadores -->
    <script src="assets/js/app-initialization.js"></script>
    <script src="assets/js/main.js"></script>

    <!-- Script de inicio -->
    <script>
    document.addEventListener('DOMContentLoaded', async function() {
        try {
            await window.StateManager.initialize();
            await window.NetworkDiagramApp.initialize();
            console.log('‚úÖ Aplicaci√≥n iniciada correctamente');
        } catch (error) {
            console.error('‚ùå Error iniciando aplicaci√≥n:', error);
        }
    });
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Aplicaci√≥n profesional de mapeo de redes" />
  <meta name="author" content="Network Diagram Creator" />
  <title>Network Diagram Creator Pro v3</title>

  <!-- Favicon -->
  <link rel="icon" href="assets/icons/favicon.ico" type="image/x-icon">

  <!-- Preload and Critical Styles -->
  <link rel="preload" href="assets/css/main.css" as="style">
  <link rel="preload" href="assets/js/app.js" as="script">

  <!-- CSS Global -->
  <link rel="stylesheet" href="assets/css/themes.css">
  <link rel="stylesheet" href="assets/css/main.css">
  <link rel="stylesheet" href="assets/css/components.css">
  <link rel="stylesheet" href="assets/css/responsive.css">
  
  <!-- Iconos -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Custom Styles -->
  <style>
    /* Estilos cr√≠ticos opcionales aqu√≠ */
    body.loading {
      overflow: hidden;
    }
  </style>
</head>
<body>
  <!-- Pantalla de Carga -->
  <div id="loading-screen" class="loading-screen">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <h2>Network Diagram Creator</h2>
      <p>Inicializando aplicaci√≥n...</p>
      <div class="loading-progress">
        <div class="progress-bar" id="progress-bar"></div>
      </div>
      <div class="loading-details">
        <p id="loading-status">Cargando componentes...</p>
        <p id="loading-step">Paso 1 de 6</p>
      </div>
    </div>
  </div>

  <!-- Contenedor Principal -->
  <div class="app-container hidden" id="mainApp">
    <!-- Encabezado -->
    <header class="app-header">
      <div class="app-title">
        <i class="fas fa-network-wired"></i>
        <span>Network Diagram Creator Pro</span>
        <span class="version">v3.0</span>
      </div>
      <div class="theme-controls">
        <button class="theme-toggle" onclick="UI.toggleTheme()">üåô Tema</button>
        <button class="theme-toggle" onclick="Monitoring.toggle()">üìä Monitor</button>
        <button class="theme-toggle" onclick="UI.showHelp()">‚ùì Ayuda</button>
      </div>
    </header>

    <!-- Estructura Principal -->
    <div class="main-layout">
      <!-- Sidebar Izquierdo -->
      <aside class="sidebar">
        <div class="sidebar-tabs">
          <button class="sidebar-tab active" onclick="Sidebar.switchTab('devices')">üì± Dispositivos</button>
          <button class="sidebar-tab" onclick="Sidebar.switchTab('templates')">üìã Plantillas</button>
          <button class="sidebar-tab" onclick="Sidebar.switchTab('layers')">üèóÔ∏è Capas</button>
        </div>
        <div class="sidebar-content">
          <!-- Dispositivos -->
          <div id="devices-tab" class="tab-content active">
            <input type="text" class="search-box" placeholder="üîç Buscar dispositivos..." onkeyup="Sidebar.filterDevices(this.value)">
            <div id="device-categories"></div>
          </div>
          <!-- Plantillas -->
          <div id="templates-tab" class="tab-content">
            <h3>üèóÔ∏è Plantillas</h3>
            <div id="templates-grid"></div>
          </div>
          <!-- Capas -->
          <div id="layers-tab" class="tab-content">
            <h3>üèóÔ∏è Capas</h3>
            <div id="layer-controls"></div>
            <select id="current-layer" onchange="LayerManager.setCurrentLayer(this.value)">
              <option value="core">Core</option>
              <option value="distribution">Distribution</option>
              <option value="access">Access</option>
              <option value="dmz">DMZ</option>
              <option value="user">Usuario</option>
              <option value="iot">IoT</option>
            </select>
          </div>
        </div>
      </aside>

      <!-- √Årea de Trabajo -->
      <main class="workspace-container">
        <div class="advanced-toolbar" id="advanced-toolbar"></div>
        <div class="canvas-area">
          <div class="canvas-viewport">
            <div class="canvas-container" id="canvas-container">
              <svg id="connection-svg"></svg>
            </div>
          </div>
          <div class="layer-indicator" id="layer-indicator">üìç Capa: Core</div>
          <div class="monitoring-panel hidden" id="monitoring-panel"></div>
        </div>
      </main>
    </div>
  </div>

  <!-- Pantalla de Error -->
  <div id="error-screen" class="error-screen hidden">
    <div class="error-content">
      <h2>üö® Error de Inicializaci√≥n</h2>
      <p id="error-message">Algo fall√≥ al cargar la aplicaci√≥n.</p>
      <details id="error-details">
        <summary>Detalles t√©cnicos</summary>
        <pre id="error-stack"></pre>
      </details>
      <div class="error-actions">
        <button class="btn btn-primary" onclick="location.reload()">üîÑ Recargar</button>
        <button class="btn btn-secondary" onclick="resetApplication()">üõ†Ô∏è Reiniciar</button>
      </div>
    </div>
  </div>

  <!-- Scripts esenciales -->
  <script src="assets/js/utils/helpers.js"></script>
  <script src="assets/js/utils/validators.js"></script>
  <script src="assets/js/utils/error-handler.js"></script>
  <script src="assets/js/state-manager.js"></script>
  <script src="assets/js/core/canvas-manager.js"></script>
  <script src="assets/js/core/layer-manager.js"></script>
  <script src="assets/js/core/device-manager.js"></script>
  <script src="assets/js/core/connection-manager.js"></script>
  <script src="assets/js/core/interface-manager.js"></script>
  <script src="assets/js/ui/modal.js"></script>
  <script src="assets/js/ui/notifications.js"></script>
  <script src="assets/js/ui/sidebar.js"></script>
  <script src="assets/js/ui/toolbar.js"></script>
  <script src="assets/js/utils/file-manager.js"></script>
  <script src="assets/js/app-initialization.js"></script>
  <script src="assets/js/app.js"></script>
</body>
</html>
